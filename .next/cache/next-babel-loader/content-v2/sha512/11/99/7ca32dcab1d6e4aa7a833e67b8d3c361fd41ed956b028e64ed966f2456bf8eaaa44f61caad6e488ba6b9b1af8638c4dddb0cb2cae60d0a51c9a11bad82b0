{"ast":null,"code":"// according to https://github.com/sequelize/sequelize/issues/10579#issuecomment-574604414\n// and https://github.com/RobinBuschmann/sequelize-typescript/issues/612#issuecomment-583728166\nexport default function restoreSequelizeAttributesOnClass(newTarget, self, methods) {\n  methods.forEach(method => {\n    const fnToAttach = method.replace(/([a-z])([A-Z])/g, \"$1 $2\").split(\" \").pop();\n    const devAssociationFn = self.__proto__[method];\n    const prodAssociationFn = self.__proto__[method + \"_\" + fnToAttach];\n    self[method] = devAssociationFn || prodAssociationFn;\n  });\n  [...Object.keys(newTarget.rawAttributes), ...Object.keys(newTarget.associations)].forEach(propertyKey => {\n    Object.defineProperty(self, propertyKey, {\n      get() {\n        return self.getDataValue(propertyKey);\n      },\n\n      set(value) {\n        self.setDataValue(propertyKey, value);\n      }\n\n    });\n  });\n}","map":{"version":3,"sources":["/Users/abhi/www/letterpad-admin/src/graphql/db/models/_tooling.ts"],"names":["restoreSequelizeAttributesOnClass","newTarget","self","methods","forEach","method","fnToAttach","replace","split","pop","devAssociationFn","__proto__","prodAssociationFn","Object","keys","rawAttributes","associations","propertyKey","defineProperty","get","getDataValue","set","value","setDataValue"],"mappings":"AAEA;AACA;AACA,eAAe,SAASA,iCAAT,CACbC,SADa,EAEbC,IAFa,EAGbC,OAHa,EAIP;AACNA,EAAAA,OAAO,CAACC,OAAR,CAAgBC,MAAM,IAAI;AACxB,UAAMC,UAAU,GAAGD,MAAM,CACtBE,OADgB,CACR,iBADQ,EACW,OADX,EAEhBC,KAFgB,CAEV,GAFU,EAGhBC,GAHgB,EAAnB;AAIA,UAAMC,gBAAgB,GAAIR,IAAD,CAAcS,SAAd,CAAwBN,MAAxB,CAAzB;AACA,UAAMO,iBAAiB,GAAIV,IAAD,CAAcS,SAAd,CACxBN,MAAM,GAAG,GAAT,GAAeC,UADS,CAA1B;AAIAJ,IAAAA,IAAI,CAACG,MAAD,CAAJ,GAAeK,gBAAgB,IAAIE,iBAAnC;AACD,GAXD;AAYA,GACE,GAAGC,MAAM,CAACC,IAAP,CAAYb,SAAS,CAACc,aAAtB,CADL,EAEE,GAAGF,MAAM,CAACC,IAAP,CAAYb,SAAS,CAACe,YAAtB,CAFL,EAGEZ,OAHF,CAGUa,WAAW,IAAI;AACvBJ,IAAAA,MAAM,CAACK,cAAP,CAAsBhB,IAAtB,EAA4Be,WAA5B,EAAyC;AACvCE,MAAAA,GAAG,GAAG;AACJ,eAAOjB,IAAI,CAACkB,YAAL,CAAkBH,WAAlB,CAAP;AACD,OAHsC;;AAIvCI,MAAAA,GAAG,CAACC,KAAD,EAAQ;AACTpB,QAAAA,IAAI,CAACqB,YAAL,CAAkBN,WAAlB,EAA+BK,KAA/B;AACD;;AANsC,KAAzC;AAQD,GAZD;AAaD","sourcesContent":["import { Model } from \"sequelize\";\n\n// according to https://github.com/sequelize/sequelize/issues/10579#issuecomment-574604414\n// and https://github.com/RobinBuschmann/sequelize-typescript/issues/612#issuecomment-583728166\nexport default function restoreSequelizeAttributesOnClass(\n  newTarget,\n  self: Model,\n  methods: string[],\n): void {\n  methods.forEach(method => {\n    const fnToAttach = method\n      .replace(/([a-z])([A-Z])/g, \"$1 $2\")\n      .split(\" \")\n      .pop();\n    const devAssociationFn = (self as any).__proto__[method];\n    const prodAssociationFn = (self as any).__proto__[\n      method + \"_\" + fnToAttach\n    ];\n\n    self[method] = devAssociationFn || prodAssociationFn;\n  });\n  [\n    ...Object.keys(newTarget.rawAttributes),\n    ...Object.keys(newTarget.associations),\n  ].forEach(propertyKey => {\n    Object.defineProperty(self, propertyKey, {\n      get() {\n        return self.getDataValue(propertyKey);\n      },\n      set(value) {\n        self.setDataValue(propertyKey, value);\n      },\n    });\n  });\n}\n"]},"metadata":{},"sourceType":"module"}