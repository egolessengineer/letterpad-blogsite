{"ast":null,"code":"import _extends from \"/Users/abhi/www/letterpad-admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"/Users/abhi/www/letterpad-admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/abhi/www/letterpad-admin/src/hoc/withAuth.tsx\",\n    _this = this;\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSession } from \"next-auth/client\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\n\nvar withAuthCheck = function withAuthCheck(WrappedComponent) {\n  var _s = $RefreshSig$();\n\n  var ComponentWithAuth = function ComponentWithAuth(props) {\n    _s();\n\n    var _useSession = useSession(),\n        _useSession2 = _slicedToArray(_useSession, 2),\n        session = _useSession2[0],\n        loading = _useSession2[1];\n\n    var router = useRouter();\n    useEffect(function () {\n      var _session$user;\n\n      var _session = session;\n\n      if (!loading && !(_session !== null && _session !== void 0 && (_session$user = _session.user) !== null && _session$user !== void 0 && _session$user.id)) {\n        router.push(\"/api/auth/signin\");\n      }\n    }, [loading]);\n    if (!session) return null;\n    return __jsx(WrappedComponent, _extends({}, props, {\n      session: session.user,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 12\n      }\n    }));\n  };\n\n  _s(ComponentWithAuth, \"WmdPD+aq6A7vW+Y8i4OJIowUTHI=\", false, function () {\n    return [useSession, useRouter];\n  });\n\n  ComponentWithAuth.needsAuth = true;\n  ComponentWithAuth.layout = null;\n  return ComponentWithAuth;\n};\n\nexport default withAuthCheck;","map":{"version":3,"sources":["/Users/abhi/www/letterpad-admin/src/hoc/withAuth.tsx"],"names":["useSession","useRouter","useEffect","withAuthCheck","WrappedComponent","ComponentWithAuth","props","session","loading","router","_session","user","id","push","needsAuth","layout"],"mappings":";;;;;;;;AACA,SAASA,UAAT,QAA2B,kBAA3B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,SAAT,QAA0B,OAA1B;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,gBADoB,EAEjB;AAAA;;AACH,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,KAAD,EAAc;AAAA;;AAAA,sBACXN,UAAU,EADC;AAAA;AAAA,QAC/BO,OAD+B;AAAA,QACtBC,OADsB;;AAEtC,QAAMC,MAAM,GAAGR,SAAS,EAAxB;AACAC,IAAAA,SAAS,CAAC,YAAM;AAAA;;AACd,UAAMQ,QAAQ,GAAGH,OAAjB;;AACA,UAAI,CAACC,OAAD,IAAY,EAACE,QAAD,aAACA,QAAD,gCAACA,QAAQ,CAAEC,IAAX,0CAAC,cAAgBC,EAAjB,CAAhB,EAAqC;AACnCH,QAAAA,MAAM,CAACI,IAAP,CAAY,kBAAZ;AACD;AACF,KALQ,EAKN,CAACL,OAAD,CALM,CAAT;AAOA,QAAI,CAACD,OAAL,EAAc,OAAO,IAAP;AACd,WAAO,MAAC,gBAAD,eAAsBD,KAAtB;AAA6B,MAAA,OAAO,EAAEC,OAAO,CAACI,IAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD,GAZD;;AADG,KACGN,iBADH;AAAA,YAE0BL,UAF1B,EAGcC,SAHd;AAAA;;AAcHI,EAAAA,iBAAiB,CAACS,SAAlB,GAA8B,IAA9B;AACAT,EAAAA,iBAAiB,CAACU,MAAlB,GAA2B,IAA3B;AACA,SAAOV,iBAAP;AACD,CAnBD;;AAoBA,eAAeF,aAAf","sourcesContent":["import { SessionData } from \"@/graphql/types\";\nimport { useSession } from \"next-auth/client\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\n\nconst withAuthCheck = <T extends object>(\n  WrappedComponent: React.ComponentType<T>,\n) => {\n  const ComponentWithAuth = (props: T) => {\n    const [session, loading] = useSession();\n    const router = useRouter();\n    useEffect(() => {\n      const _session = session as unknown as { user: SessionData };\n      if (!loading && !_session?.user?.id) {\n        router.push(\"/api/auth/signin\");\n      }\n    }, [loading]);\n\n    if (!session) return null;\n    return <WrappedComponent {...props} session={session.user} />;\n  };\n  ComponentWithAuth.needsAuth = true;\n  ComponentWithAuth.layout = null;\n  return ComponentWithAuth;\n};\nexport default withAuthCheck;\n"]},"metadata":{},"sourceType":"module"}