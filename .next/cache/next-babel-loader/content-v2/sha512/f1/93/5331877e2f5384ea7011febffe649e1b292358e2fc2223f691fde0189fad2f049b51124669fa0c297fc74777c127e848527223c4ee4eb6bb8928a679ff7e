{"ast":null,"code":"import _regeneratorRuntime from \"/Users/abhi/www/letterpad-admin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/abhi/www/letterpad-admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { initializeApollo } from \"@/graphql/apollo\";\nimport { SettingsDocument } from \"@/__generated__/queries/queries.graphql\";\nimport Router from \"next/router\";\nimport NProgress from \"nprogress\";\nexport var getReadableDate = function getReadableDate(timestamp) {\n  return new Date(timestamp).toLocaleString(\"en-us\", {\n    month: \"long\",\n    year: \"numeric\",\n    day: \"numeric\"\n  });\n};\nexport var getDateTime = function getDateTime(d) {\n  var m = d ? new Date(d) : new Date();\n  var dateString = m.getUTCFullYear() + \"-\" + (\"0\" + (m.getUTCMonth() + 1)).slice(-2) + \"-\" + (\"0\" + m.getUTCDate()).slice(-2) + \" \" + (\"0\" + m.getUTCHours()).slice(-2) + \":\" + (\"0\" + m.getUTCMinutes()).slice(-2) + \":\" + (\"0\" + m.getUTCSeconds()).slice(-2);\n  return dateString;\n};\nexport function debounce(func, timeout) {\n  var timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timer);\n    return new Promise(function (resolve) {\n      timer = setTimeout(function () {\n        return resolve(func.apply(void 0, args));\n      }, timeout);\n    });\n  };\n}\nexport function getBase64(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      return resolve(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      return reject(error);\n    };\n  });\n}\nexport function getSettings() {\n  return _getSettings.apply(this, arguments);\n}\n\nfunction _getSettings() {\n  _getSettings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var client;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return initializeApollo();\n\n          case 2:\n            client = _context.sent;\n            return _context.abrupt(\"return\", client.query({\n              query: SettingsDocument\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getSettings.apply(this, arguments);\n}\n\nexport function initPageProgress() {\n  NProgress.configure({\n    showSpinner: true\n  });\n  Router.events.on(\"routeChangeStart\", function (_url) {\n    NProgress.start();\n  });\n  Router.events.on(\"routeChangeComplete\", function () {\n    return NProgress.done();\n  });\n  Router.events.on(\"routeChangeError\", function () {\n    return NProgress.done();\n  });\n}","map":{"version":3,"sources":["/Users/abhi/www/letterpad-admin/shared/utils.ts"],"names":["initializeApollo","SettingsDocument","Router","NProgress","getReadableDate","timestamp","Date","toLocaleString","month","year","day","getDateTime","d","m","dateString","getUTCFullYear","getUTCMonth","slice","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","debounce","func","timeout","timer","args","clearTimeout","Promise","resolve","setTimeout","getBase64","file","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","getSettings","client","query","initPageProgress","configure","showSpinner","events","on","_url","start","done"],"mappings":"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","sourcesContent":["import { initializeApollo } from \"@/graphql/apollo\";\nimport {\n  SettingsDocument,\n  SettingsQuery,\n  SettingsQueryVariables,\n} from \"@/__generated__/queries/queries.graphql\";\nimport Router from \"next/router\";\nimport NProgress from \"nprogress\";\n\nexport const getReadableDate = (timestamp: Date) => {\n  return new Date(timestamp).toLocaleString(\"en-us\", {\n    month: \"long\",\n    year: \"numeric\",\n    day: \"numeric\",\n  });\n};\n\nexport const getDateTime = (d?: Date) => {\n  const m = d ? new Date(d) : new Date();\n\n  const dateString =\n    m.getUTCFullYear() +\n    \"-\" +\n    (\"0\" + (m.getUTCMonth() + 1)).slice(-2) +\n    \"-\" +\n    (\"0\" + m.getUTCDate()).slice(-2) +\n    \" \" +\n    (\"0\" + m.getUTCHours()).slice(-2) +\n    \":\" +\n    (\"0\" + m.getUTCMinutes()).slice(-2) +\n    \":\" +\n    (\"0\" + m.getUTCSeconds()).slice(-2);\n\n  return dateString;\n};\n\nexport function debounce<Params extends any[]>(\n  func: (...args: Params) => any,\n  timeout: number,\n): (...args: Params) => Promise<any> {\n  let timer: NodeJS.Timeout;\n\n  return (...args: Params) => {\n    clearTimeout(timer);\n    return new Promise(resolve => {\n      timer = setTimeout(() => resolve(func(...args)), timeout);\n    });\n  };\n}\n\nexport function getBase64(file: File) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport async function getSettings() {\n  const client = await initializeApollo();\n  return client.query<SettingsQuery, SettingsQueryVariables>({\n    query: SettingsDocument,\n  });\n}\n\nexport function initPageProgress() {\n  NProgress.configure({ showSpinner: true });\n  Router.events.on(\"routeChangeStart\", _url => {\n    NProgress.start();\n  });\n  Router.events.on(\"routeChangeComplete\", () => NProgress.done());\n  Router.events.on(\"routeChangeError\", () => NProgress.done());\n}\n"]},"metadata":{},"sourceType":"module"}